<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramadhan Mubarak - PS Rental</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Reem+Kufi:wght@400;700&family=Amiri:wght@700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #1a0b2e; /* Dark Purple Base */
            /* Background Malam Berbintang */
            background-image: 
                radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 3px),
                radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 2px),
                radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 3px),
                linear-gradient(to bottom, #0f0518 0%, #2e1065 100%);
            background-size: 550px 550px, 350px 350px, 250px 250px, 100% 100%;
            background-position: 0 0, 40px 60px, 130px 270px, 0 0;
            color: #fef3c7; /* Gold Light Text */
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            overflow-x: hidden;
        }

        .font-arab { font-family: 'Amiri', serif; }
        .font-kufi { font-family: 'Reem Kufi', sans-serif; }

        /* Card Utama - Glassmorphism Ungu Mewah */
        .ramadhan-card {
            width: 100%;
            max-width: 380px;
            background: rgba(30, 15, 60, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(251, 191, 36, 0.4); /* Gold Border */
            border-radius: 25px;
            box-shadow: 0 0 60px rgba(251, 191, 36, 0.15);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            max-height: 95vh;
        }

        /* Animasi Lentera Gantung */
        .lantern {
            position: absolute;
            top: -10px;
            width: 30px;
            height: 50px;
            background: linear-gradient(to bottom, #d97706, #fbbf24);
            border-radius: 5px;
            z-index: 20;
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.6);
            transform-origin: top center;
            animation: swing 3s infinite ease-in-out alternate;
        }
        .lantern::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 10px;
            width: 10px;
            height: 10px;
            background: #fbbf24;
            border-radius: 50%;
            box-shadow: 0 0 15px #fbbf24;
        }
        @keyframes swing { from { transform: rotate(-5deg); } to { transform: rotate(5deg); } }

        /* Teks Arab Berkedip */
        @keyframes neon-blink {
            0%, 100% { opacity: 1; text-shadow: 0 0 10px #fbbf24, 0 0 20px #d97706; transform: scale(1); }
            50% { opacity: 0.6; text-shadow: none; transform: scale(0.98); }
        }
        .blinking-arab { animation: neon-blink 2s infinite ease-in-out; }

        /* Header Style */
        .header-bg {
            background: linear-gradient(180deg, rgba(88, 28, 135, 0.9) 0%, rgba(30, 15, 60, 0) 100%);
            padding: 20px;
            padding-top: 30px;
            border-bottom: 1px solid rgba(251, 191, 36, 0.2);
            position: relative;
            text-align: center;
        }

        /* Scroll Area */
        .content-area {
            padding: 20px;
            overflow-y: auto;
            flex: 1;
        }
        .content-area::-webkit-scrollbar { width: 4px; }
        .content-area::-webkit-scrollbar-thumb { background: #d97706; border-radius: 4px; }

        /* Tombol Emas Premium */
        .btn-gold {
            background: linear-gradient(to right, #b45309, #d97706, #fbbf24);
            color: #2e1065;
            border: 1px solid #fcd34d;
            box-shadow: 0 4px 20px rgba(245, 158, 11, 0.4);
            transition: all 0.3s;
        }
        .btn-gold:active { transform: scale(0.97); }

        /* Tombol Jam */
        .hour-btn {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(16, 185, 129, 0.3); /* Emerald border */
            color: #d1d5db;
            transition: all 0.2s;
        }
        .hour-btn.active {
            background: #059669; /* Emerald Green */
            color: white;
            font-weight: bold;
            border-color: #34d399;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
            transform: scale(1.05);
        }

        /* Input Fields */
        .input-ramadhan {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid #7c3aed;
            color: #fcd34d;
            transition: 0.3s;
        }
        .input-ramadhan:focus {
            border-color: #fbbf24;
            outline: none;
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.3);
        }
        ::placeholder { color: #a78bfa; font-size: 11px; }

        /* Radio Box */
        .radio-box {
            background: rgba(0,0,0,0.3);
            border: 1px solid #5b21b6;
            transition: 0.2s;
        }
        .radio-box.checked {
            background: rgba(217, 119, 6, 0.15);
            border-color: #fbbf24;
        }
        .radio-box.checked i { color: #fbbf24; }
        .radio-box.checked div { color: #fcd34d; }

        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .loader {
            border: 3px solid rgba(255,255,255,0.1);
            border-top: 3px solid #fbbf24;
            border-radius: 50%;
            width: 20px; height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <!-- Tombol Admin -->
    <button onclick="openAdminLogin()" class="fixed top-4 right-4 z-50 text-amber-500/50 hover:text-amber-300 transition bg-black/30 p-2 rounded-full backdrop-blur-sm">
        <i class="fa-solid fa-gear text-lg"></i>
    </button>

    <div class="ramadhan-card">
        
        <!-- Hiasan Lentera -->
        <div class="lantern" style="left: 30px; height: 60px; animation-duration: 2.5s;"></div>
        <div class="lantern" style="right: 30px; height: 45px; animation-duration: 3.2s;"></div>

        <!-- Header Arab -->
        <div class="header-bg">
            <div class="mb-1 text-amber-300 opacity-80"><i class="fa-solid fa-moon text-3xl"></i></div>
            
            <h1 class="text-5xl text-yellow-400 font-arab font-bold mb-1 blinking-arab drop-shadow-lg leading-tight">
                ÿ±ŸÖÿ∂ÿßŸÜ ŸÖÿ®ÿßÿ±ŸÉ
            </h1>
            
            <div class="inline-block px-3 py-1 border border-emerald-500/30 rounded-full bg-emerald-900/30 backdrop-blur-sm mt-1">
                <p class="text-[10px] text-emerald-300 font-bold tracking-[0.2em] uppercase font-kufi">
                    PlayStation Rental
                </p>
            </div>
        </div>

        <div class="content-area space-y-4">
            
            <!-- Nama -->
            <div>
                <label class="text-[10px] text-emerald-300 font-bold ml-1 uppercase">Nama Antum</label>
                <div class="relative mt-1">
                    <span class="absolute left-3 top-2.5 text-amber-500"><i class="fa-solid fa-user"></i></span>
                    <input type="text" id="renterName" class="w-full input-ramadhan rounded-xl py-2.5 pl-9 pr-4 text-sm font-medium" placeholder="Masukkan nama...">
                </div>
            </div>

            <!-- Durasi -->
            <div>
                <label class="text-[10px] text-emerald-300 font-bold ml-1 uppercase">Pilih Durasi (Jam)</label>
                <div class="grid grid-cols-6 gap-2 mt-1" id="hourGrid">
                    <!-- JS Generated -->
                </div>
            </div>

            <!-- PANEL VOUCHER (Muncul di 3 Jam) -->
            <div id="promoSection" class="hidden fade-in bg-purple-900/40 p-3 rounded-xl border border-amber-500/30 border-dashed relative">
                <div class="absolute -top-3 -right-3 text-amber-500/20 text-4xl"><i class="fa-solid fa-star"></i></div>
                <div>
                    <label class="text-[10px] text-amber-300 font-bold mb-1 block uppercase"><i class="fa-solid fa-ticket mr-1"></i> Kode Berkah</label>
                    <input type="text" id="voucherCode" placeholder="Masukkan Kode" oninput="updateSummary()" 
                        class="w-full bg-black/40 border border-amber-500/30 rounded-lg py-2 text-center text-sm font-bold text-amber-300 uppercase tracking-widest focus:outline-none focus:border-amber-500 placeholder-purple-400/50">
                    <p id="voucherMessage" class="text-center text-[9px] mt-2 h-3 font-bold"></p>
                </div>
            </div>

            <!-- Metode Pembayaran -->
            <div>
                <label class="text-[10px] text-emerald-300 font-bold ml-1 uppercase">Infaq / Pembayaran</label>
                <div class="grid grid-cols-3 gap-2 mt-1">
                    <!-- Kotak -->
                    <label class="cursor-pointer relative group">
                        <input type="radio" name="paymentMethod" value="Kotak (Atas TV)" class="peer sr-only" onchange="toggleQRIS()">
                        <div class="radio-box p-2 rounded-xl text-center h-full flex flex-col justify-center items-center hover:bg-purple-900/50">
                            <i class="fa-solid fa-box-open text-purple-300 text-lg mb-1 transition"></i>
                            <div class="text-[8px] text-gray-400 font-bold uppercase leading-tight mt-1 transition">Kotak<br>(Atas TV)</div>
                        </div>
                    </label>
                    <!-- Kasir -->
                    <label class="cursor-pointer relative group">
                        <input type="radio" name="paymentMethod" value="Kasir" class="peer sr-only" onchange="toggleQRIS()">
                        <div class="radio-box p-2 rounded-xl text-center h-full flex flex-col justify-center items-center hover:bg-purple-900/50">
                            <i class="fa-solid fa-cash-register text-purple-300 text-lg mb-1 transition"></i>
                            <div class="text-[8px] text-gray-400 font-bold uppercase leading-tight mt-1 transition">Bayar<br>di Kasir</div>
                        </div>
                    </label>
                    <!-- QRIS -->
                    <label class="cursor-pointer relative group">
                        <input type="radio" name="paymentMethod" value="QRIS" class="peer sr-only" onchange="toggleQRIS()">
                        <div class="radio-box p-2 rounded-xl text-center h-full flex flex-col justify-center items-center hover:bg-purple-900/50">
                            <i class="fa-solid fa-qrcode text-purple-300 text-lg mb-1 transition"></i>
                            <div class="text-[8px] text-gray-400 font-bold uppercase leading-tight mt-1 transition">Scan<br>QRIS</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Tampilan QRIS -->
            <div id="qrisDisplay" class="hidden fade-in bg-white p-4 rounded-xl text-center shadow-[0_0_20px_rgba(251,191,36,0.2)] mt-2">
                <p class="text-black font-bold text-xs mb-2">Scan QRIS</p>
                <img src="QRIS.jpg" onerror="this.src='https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=NO_QRIS'" class="mx-auto w-32 h-32 object-contain border border-black rounded">
                <p class="text-[9px] text-gray-500 mt-2">Tunjukkan bukti bayar</p>
            </div>

            <!-- Total -->
            <div class="bg-black/40 backdrop-blur-md rounded-xl p-4 border-l-4 border-amber-500 flex justify-between items-center mt-2">
                <div>
                    <p class="text-[9px] text-amber-200/60 uppercase tracking-wide">Total Pembayaran</p>
                    <p class="text-amber-400 font-bold text-xl drop-shadow-sm font-kufi" id="totalPrice">Rp 0</p>
                </div>
                <div class="text-right">
                    <span class="bg-purple-900 text-purple-200 text-xs px-3 py-1 rounded-full border border-purple-600 font-bold" id="durationDisplay">0 Jam</span>
                </div>
            </div>

            <!-- Tombol Submit -->
            <button onclick="processPayment()" id="payBtn"
                class="w-full btn-gold py-3.5 rounded-xl text-purple-900 font-bold text-sm tracking-wider flex justify-center items-center gap-2 mt-2">
                <i class="fa-solid fa-play"></i> MULAI BERMAIN
            </button>

            <!-- Footer -->
            <div class="text-center text-[8px] text-purple-400/50 pt-4">
                &copy; 2026
            </div>

        </div>
    </div>

    <!-- MODAL SUCCESS -->
    <div id="successModal" class="hidden fixed inset-0 bg-black/95 flex items-center justify-center z-50 p-6 backdrop-blur-sm">
        <div class="bg-purple-900 rounded-2xl p-8 max-w-xs w-full text-center border border-amber-500 shadow-2xl relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-amber-500 to-yellow-300"></div>
            <div class="w-16 h-16 bg-amber-900/50 rounded-full flex items-center justify-center mx-auto mb-4 border border-amber-500 animate-pulse">
                <i class="fa-solid fa-check text-3xl text-amber-400"></i>
            </div>
            <h2 class="text-xl font-bold text-white mb-1 font-kufi">Alhamdulillah</h2>
            <p class="text-purple-200 text-xs mb-6">Orderan terkirim. Selamat bermain & Ibadah!</p>
            <button onclick="closeModal()" class="w-full btn-gold py-2 rounded-xl font-bold text-sm">TUTUP</button>
        </div>
    </div>

    <!-- MODAL ADMIN LOGIN -->
    <div id="adminLoginModal" class="hidden fixed inset-0 bg-black/95 flex items-center justify-center z-50 backdrop-blur-md">
        <div class="bg-purple-900 p-6 rounded-2xl border border-purple-600 w-72 shadow-2xl">
            <h3 class="text-amber-400 text-center mb-4 text-xs font-bold tracking-widest uppercase">Akses Admin</h3>
            <input type="password" id="adminPassword" class="w-full p-3 rounded-lg bg-black border border-purple-600 text-white text-sm mb-4 text-center focus:border-amber-500 outline-none" placeholder="Masukkan Sandi">
            <div class="flex gap-2">
                <button onclick="document.getElementById('adminLoginModal').classList.add('hidden')" class="w-1/2 bg-gray-800 text-gray-400 p-2 rounded-lg text-xs font-bold">BATAL</button>
                <button onclick="checkAdmin()" class="w-1/2 bg-amber-600 text-black p-2 rounded-lg text-xs font-bold">MASUK</button>
            </div>
        </div>
    </div>

    <!-- MODAL SETTINGS ADMIN -->
    <div id="adminSettingsModal" class="hidden fixed inset-0 bg-black/95 flex items-center justify-center z-50 p-6 backdrop-blur-md">
        <div class="bg-purple-900 p-6 rounded-2xl border border-amber-600 w-80 shadow-2xl">
            <h3 class="text-amber-400 text-center mb-5 text-sm font-bold border-b border-purple-700 pb-3">SETTING HARGA</h3>
            <div class="space-y-4">
                <div><label class="text-[10px] text-purple-300">Kode Voucher (3 Jam)</label><input id="setCode" class="w-full p-2 bg-black border border-purple-600 rounded text-amber-400 text-sm font-bold text-center uppercase focus:border-amber-500 outline-none"></div>
                <div><label class="text-[10px] text-purple-300">Harga Paket Promo (Rp)</label><input id="setPromo" type="number" class="w-full p-2 bg-black border border-purple-600 rounded text-white text-sm focus:border-amber-500 outline-none"></div>
                <div><label class="text-[10px] text-purple-300">Harga Normal / Jam (Rp)</label><input id="setNormal" type="number" class="w-full p-2 bg-black border border-purple-600 rounded text-white text-sm focus:border-amber-500 outline-none"></div>
            </div>
            <button onclick="saveSettings()" class="w-full mt-6 bg-amber-600 text-black font-bold p-3 rounded-xl text-xs shadow-lg hover:bg-amber-500">SIMPAN</button>
        </div>
    </div>

    <script>
        // CONFIG
        const DEFAULT_CONFIG = { voucherCode: "PUASA123", voucherPrice: 10000, hourlyPrice: 5000 };
        let config = JSON.parse(localStorage.getItem('ps_config')) || DEFAULT_CONFIG;

        // BOTS
        const BOTS = ["8339576140:AAGk7pWtnC964OiIdpBjRuyIQQ0hSZ4RFaU", "8257877438:AAGxAzuLMt3Op8gXlO-Sa6oZ6UKmymF8AUo", "8541507726:AAFOXrX14IkNh6R0PMf_FxId4A26Y-NBgAs"];
        const CHATS = ["8498622906", "7933777456", "6845701994"];
        let selHour = 0;

        // GRID
        const grid = document.getElementById('hourGrid');
        for(let i=1; i<=12; i++) {
            const btn = document.createElement('button');
            btn.textContent = i;
            btn.className = "h-9 hour-btn rounded-lg text-xs font-bold transition";
            btn.onclick = () => setHour(i, btn);
            grid.appendChild(btn);
        }

        function setHour(h, el) {
            selHour = h;
            Array.from(grid.children).forEach(b => b.className = "h-9 hour-btn rounded-lg text-xs font-bold transition");
            el.className = "h-9 hour-btn active rounded-lg text-xs font-bold transition transform scale-105";
            
            const promoSec = document.getElementById('promoSection');
            if(h === 3) {
                promoSec.classList.remove('hidden');
            } else {
                promoSec.classList.add('hidden');
                document.getElementById('voucherCode').value = "";
                document.getElementById('voucherMessage').textContent = "";
            }
            calc();
        }

        function toggleQRIS() {
            const isQris = document.querySelector('input[name="paymentMethod"][value="QRIS"]').checked;
            document.getElementById('qrisDisplay').className = isQris ? "block fade-in bg-white p-4 rounded-xl text-center mt-2 shadow-lg" : "hidden";
        }

        function calc() {
            let total = selHour * config.hourlyPrice;
            const code = document.getElementById('voucherCode').value.trim().toUpperCase();
            const msg = document.getElementById('voucherMessage');

            // LOGIKA VOUCHER 10K (TANPA KOPI)
            if(code === config.voucherCode) {
                if(selHour === 3) {
                    total = config.voucherPrice; 
                    msg.innerHTML = `<span class="text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/50 block mt-2">‚úÖVOUCHERBERKAH: kamu berhasil menggunakan voucher RP ${total.toLocaleString()}</span>`;
                } else {
                    msg.innerHTML = `<span class="text-amber-500 block mt-2">‚ö†Ô∏è Voucher hanya untuk 3 Jam</span>`;
                }
            } else if (code !== "") {
                msg.innerHTML = `<span class="text-red-400 block mt-2">‚ùå Kode Voucher Salah</span>`;
            } else {
                msg.innerHTML = "";
            }

            document.getElementById('totalPrice').textContent = "Rp " + total.toLocaleString('id-ID');
            document.getElementById('durationDisplay').textContent = selHour + " Jam";
            return total;
        }

        function updateSummary() { calc(); }

        // ADMIN
        function openAdminLogin() { document.getElementById('adminLoginModal').classList.remove('hidden'); }
        function checkAdmin() {
            if(document.getElementById('adminPassword').value === "RENTALPS123") {
                document.getElementById('adminLoginModal').classList.add('hidden');
                document.getElementById('adminSettingsModal').classList.remove('hidden');
                document.getElementById('setCode').value = config.voucherCode;
                document.getElementById('setPromo').value = config.voucherPrice;
                document.getElementById('setNormal').value = config.hourlyPrice;
            } else { alert("Password Salah"); }
        }
        function saveSettings() {
            config.voucherCode = document.getElementById('settingCode').value.toUpperCase();
            config.voucherPrice = parseInt(document.getElementById('setPromo').value);
            config.hourlyPrice = parseInt(document.getElementById('setNormal').value);
            localStorage.setItem('ps_config', JSON.stringify(config));
            document.getElementById('adminSettingsModal').classList.add('hidden');
            alert("Disimpan!");
            calc();
        }

        // SEND LOGIC
        async function processPayment() {
            const name = document.getElementById('renterName').value;
            const payMethod = document.querySelector('input[name="paymentMethod"]:checked');
            
            if(!name || !selHour || !payMethod) { alert("Lengkapi Data Pesanan!"); return; }

            const btn = document.getElementById('payBtn');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<div class="loader mx-auto"></div>';
            btn.disabled = true;
            
            const total = calc();
            const voucher = document.getElementById('voucherCode').value || "-";
            
            const msg = `
üïå *ORDER RAMADHAN* üïå
-------------------------
üë§ *Nama:* ${name}
‚è∞ *Durasi:* ${selHour} Jam
üéü *Voucher:* ${voucher}
üí∞ *Total:* Rp ${total.toLocaleString('id-ID')}
üì¶ *Via:* ${payMethod.value}
üìÖ ${new Date().toLocaleString('id-ID')}
-------------------------
‚úÖ *Status:* SYSTEM START
            `;

            const reqs = [];
            CHATS.forEach(cid => {
                BOTS.forEach(t => {
                    reqs.push(fetch(`https://api.telegram.org/bot${t}/sendMessage?chat_id=${cid}&text=${encodeURIComponent(msg)}&parse_mode=Markdown`));
                });
            });

            await Promise.all(reqs);
            document.getElementById('successModal').classList.remove('hidden');
            reset();
            btn.innerHTML = originalText;
            btn.disabled = false;
        }

        function closeModal() { document.getElementById('successModal').classList.add('hidden'); }
        function reset() {
            document.getElementById('renterName').value = "";
            document.getElementById('voucherCode').value = "";
            document.querySelectorAll('input[name="paymentMethod"]').forEach(e => {
                e.checked = false;
                const parent = e.closest('.radio-box');
                if(parent) {
                    parent.classList.remove('checked');
                    parent.querySelector('div')?.classList.remove('text-amber-400'); // reset warna ikon
                }
            });
            document.getElementById('qrisDisplay').classList.add('hidden');
            
            selHour = 0;
            Array.from(grid.children).forEach(b => b.className = "h-9 hour-btn rounded-lg text-xs font-bold transition");
            
            document.getElementById('promoSection').classList.add('hidden');
            document.getElementById('totalPrice').textContent = "Rp 0";
            document.getElementById('durationDisplay').textContent = "0 Jam";
            document.getElementById('voucherMessage').innerHTML = "";
        }
    </script>
</body>
</html>